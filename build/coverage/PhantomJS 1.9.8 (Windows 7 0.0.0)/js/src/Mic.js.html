<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for ./js/src/Mic.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">./js/src/Mic.js</span></h1>
    <h2>
        Statements: <span class="metric">99.38% <small>(159 / 160)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">94.83% <small>(55 / 58)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">100% <small>(17 / 17)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">99.36% <small>(155 / 156)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">./js/src/</a> &#187; Mic.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">25</span>
<span class="cline-any cline-yes">25</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">194</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">25</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">37</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">16</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">17</span>
<span class="cline-any cline-yes">16</span>
<span class="cline-any cline-yes">42</span>
<span class="cline-any cline-yes">34</span>
<span class="cline-any cline-yes">34</span>
<span class="cline-any cline-yes">32</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">87</span>
<span class="cline-any cline-yes">87</span>
<span class="cline-any cline-yes">56</span>
<span class="cline-any cline-yes">56</span>
<span class="cline-any cline-yes">56</span>
<span class="cline-any cline-yes">10</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">56</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">87</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-yes">30</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">9</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12</span>
<span class="cline-any cline-yes">12</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">10</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10</span>
<span class="cline-any cline-yes">10</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9</span>
<span class="cline-any cline-yes">9</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*!                                        
*  Mic.js 0.0.0      
*                                          
*  (c) 65c02                   
*                                          
*  MIT license             
*                                          
*  https://bitbucket.org/65c02/mic_js               
*/                                         
&nbsp;
/*jshint browser: true, bitwise: true, nomen: true, plusplus: true, indent: 4, expr: false, -W030 */
/*global define*/
&nbsp;
define([
    "module", "Mxr", "In"
], function(module, Mxr, In) {
    "use strict";
&nbsp;
    function _s_copy(dst, src) {
        var member;
        for (member in src) {
            <span class="missing-if-branch" title="else path not taken" >E</span>if (src.hasOwnProperty(member)) {
                dst[member] = src[member];
            }
        }
    }
&nbsp;
    /**
    This is the collection of static methods exposed by Mic.js
&nbsp;
    @class Mic
    @static
    */
    var Mic = {};
    module.config.In = In;          //we force In.js mixing
    Mxr.configure(module.config);   //we mix In.js before using it
    _s_copy(Mic, Mxr);              //we mix Mxr.js and In.js in Mic.js
&nbsp;
    /**
    Configures the library.
    It expects a JSON like the following:
&nbsp;
        {
            "assert" : callback,
            "disableContractChecks": boolean
        }
&nbsp;
    It is called at load time by require.js passing as `config` the config of the module.
    Anyway, you can call it again anytime.
&nbsp;
    Fields description:
&nbsp;
    `assert`:
    Optional. The signature is `void assert(boolean, String)`.
    If you pass `null` then assertions are disabled.
    If you pass `undefined` then the default implementation is used.
&nbsp;
    `disableContractChecks`:
    Optional. If true then pre and post conditions are not injected and therefore checked.
    This is useful when the code is ready for production and speed matters.
&nbsp;
    @method configure
    @static
    @param config {Object} the configuration object
    */
    //We replace the configure copied from Mxr with our own.
    Mic.configure = function (config) {
        Mic.assert &amp;&amp; Mic.assert(config !== null, "config is null");
&nbsp;
        if (config.assert) {
            Mic.assert &amp;&amp; Mic.assert(typeof config.assert === "function", "assert is not a function");
            Mic.assert = config.assert;
        } else <span class="missing-if-branch" title="if path not taken" >I</span>if (config.assert === null) {
<span class="cstat-no" title="statement not covered" >            Mic.assert = null;</span>
        } else {
            Mic.assert = _defaultAssert;
        }
&nbsp;
        if (config.disableContractChecks) {
            Mic._DISABLE_CONTRACTS_CHECKS = true;
        }
&nbsp;
        Mxr.configure(config);
    };
&nbsp;
    Mic.configure(module.config());
&nbsp;
    Mic._IS_SEALED = Mic._UTL_PFX + "_isSealed";
    Mic._COVARIANCE_VIOLATION__MSG = "covariance violated";
    Mic._COUNTERVARIANCE_VIOLATION_MSG = "countervariance violated";
    Mic._PRE = "pre";
    Mic._POST = "post";
    Mic._DISABLE_CONTRACTS_CHECKS = false;
&nbsp;
    var _defaultAssert = function(trueish, message) {
        if (!trueish) {
            //TODO: add more details about the failure, like stack trace
            throw new Error(message || "Mic.assert violated ...");
        }
    };
&nbsp;
    /**
    If `trueish` is not true then it throws an Error.
&nbsp;
    @method assert
    @static
    @param trueish {boolean} the predicate
    @param [message] {String} the message to pass in the Error
    */
    Mic.assert = _defaultAssert;
&nbsp;
    /**
    Declares you don't use variable and shuts up Jslint &amp; Co.
&nbsp;
        function f(x, y) {
            Mic.unused(x &amp; y);
        }
&nbsp;
    @method unused
    @static
    @param x {anything} a variable
    */
    Mic.unused = function (x) { x = x &amp;&amp; 0; };
&nbsp;
    /**
    Declares a block is empty by purpose and shuts up Jslint &amp; Co.
&nbsp;
        {
            Mic.empty();
        }
&nbsp;
    @method empty
    @static
    */
    Mic.empty = function() { Mic.unused(0); };
&nbsp;
    /**
    Seals the contract of `clazz`.
    Must be called after all the methods, pre-conditions, post-conditions, mixins and inheritance have been declared.
    @method seal
    @static
    @param clazz {Function} the class with contract.
    */
    Mic.seal = function (clazz) {
        Mic._seal(clazz, false);
    };
&nbsp;
    /**
    Like `seal` but it doesn't throw an Error if the class contains abstract methods.
    @method sealAbstract
    @static
    @param clazz {Function} the class with contract.
    */
    Mic.sealAbstract = function (clazz) {
        Mic._seal(clazz, true);
    };
&nbsp;
    Mic._seal = function (clazz, isAbstractClass) {
        Mic.assert(clazz);
        Mic.assert(clazz instanceof Function);
        Mic.assert(!Mic.isSealed(clazz));
        var cp = clazz.prototype;
        var memberName;
        var member;
        var synth;
        var conditions;
        if (!Mic._DISABLE_CONTRACTS_CHECKS) {
            for (memberName in cp) {
                if (cp.hasOwnProperty(memberName)) {
                    member = cp[memberName];
                    if (member instanceof Function) {
                        if (!Mic.isAbstract(member)) {
                            conditions = Mic._findConditions(cp, memberName);
                            synth = Mic._synthetize(member, conditions);
                            cp[memberName] = synth;
                        } else {
                            Mic.assert(
                                isAbstractClass,
                                "Found an abstract method on a not abstract class. Class " + clazz.name + " Method " + memberName
                            );
                        }
                    }
                }
            }
        }
        cp[Mic._IS_SEALED] = true;
    };
&nbsp;
    /**
    Return true if `seal` or `sealAbstract` have been invoked on `clazz`.
    @method isSealed
    @static
    @param clazz {Function} the class to check.
    */
    Mic.isSealed = function (clazz) {
        Mic.assert(clazz);
        Mic.assert(clazz instanceof Function);
        return clazz.prototype.hasOwnProperty(Mic._IS_SEALED);
    };
&nbsp;
    Mic._findConditions = function (prototype, memberName) {
        var member;
        var result = { pre: [], post: [] };
        var pre;
        var post;
        while (prototype) {
            member = prototype[memberName];
            if (member) {
                pre = member[Mic._PRE];
                post = member[Mic._POST];
                if (pre) {
                    result.pre.push(pre);
                }
                if (post) {
                    result.post.push(post);
                }
            }
            prototype = Object.getPrototypeOf(prototype);
        }
        return result;
    };
&nbsp;
    //This method is needed in order to avoid creation of false closures in the for cycle
    Mic._synthetize = function (member, conditions) {
        var synthType = 0;
        var preconditions = conditions.pre;
        var postconditions = conditions.post;
        if (preconditions.length &gt; 0) { synthType += 1; }
        if (postconditions.length &gt; 0) { synthType += 2; }
        var synth;
        switch (synthType) {
        case 0:
            return member;
        case 1:
            synth = function Mic_check1() {
                Mic._callPreConditions(preconditions, this, arguments);
                var result = member.apply(this, arguments);
                return result;
            };
            synth[Mic._PRE] = member[Mic._PRE];
            delete member[Mic._PRE];
            break;
        case 2:
            synth = function Mic_check2() {
                var result = member.apply(this, arguments);
                Mic._callPostConditions(postconditions, this, result, arguments);
                return result;
            };
            synth[Mic._POST] = member[Mic._POST];
            delete member[Mic._POST];
            break;
        case 3:
            synth = function Mic_check3() {
                Mic._callPreConditions(preconditions, this, arguments);
                var result = member.apply(this, arguments);
                Mic._callPostConditions(postconditions, this, result, arguments);
                return result;
            };
            synth[Mic._PRE] = member[Mic._PRE];
            delete member[Mic._PRE];
            synth[Mic._POST] = member[Mic._POST];
            delete member[Mic._POST];
            break;
        }
        Mic.assert(synth);
        return synth;
    };
&nbsp;
    Mic._callPreConditions = function (preconditions, instance, args) {
        //Covariance: precondition can only be relaxed.
        //
        //The first consequence is you do not want to add preconditions
        //to existing ones. You want to replace existing ones with a new
        //one with relaxed constraints.
        //
        //Therefore a new precondition replace the old one.
        //
        //It could happen the new one is stricter than the old one.
        //The covariance check verify this in this way:
        //If the new precondition fails, the old preconditions are failing too.
        //If it is not true then it means the new one is stricter than the old
        //ones and the covariance rule is violated.
        //
        // P = pass, F = fail
        //
        // 1 [OK] PPPPPPPP
        // 2 [OK] PPPPFFFF
        // 3 [OK] FFFFFFFF
        // 4 [KO] FFFP****
        // 5 [KO] PPFFP***
        //
        //So **FP** means violation.
        //We don't check case 5 (and 2) because it would slow down the system.
        //For cases 3 and 4 we don't care since this is an exceptional case anyway.
        //If first pre pass we assume it is case 1 even if it could have been case 2 or 5.
        var i;
        var n = preconditions.length;
        var exception;
        //we check them from the leaf of the hierarchy to the root.
        for (i = 0; i &lt; n; ++i) {
            try {
                preconditions[i].apply(instance, args);
                //The most current precodition passed. No further checks.
                // OR
                //One of the previous precoditions failed but now we
                //encountered one which doesn't fail.
                break;
            } catch (e) {
                if (!exception) {
                    exception = e; //store the first
                }
            }
        }
        if (i === 0) {
            //First precondition passed
            Mic.assert(!exception);
        } else if (i === n) {
            //All the preconditions failed
            Mic.assert(exception);
            throw exception;
        } else {
            //After the first preconditions failed some started to pass
            //Covariance violated
            throw new Error(Mic._COVARIANCE_VIOLATION__MSG);
            //TODO: implement a custom exception with a cause and pass exception as cause
        }
    };
&nbsp;
    Mic._callPostConditions = function (postconditions, instance, result, args) {
        //Countervariance: postcondition can only be restricted.
        //
        //One approach could have been to execute all the postconditions.
        //Anyway this would be complex to master and different from preconditions.
        //
        //Therefore a new postcondition replace the old one.
        //
        //From there the reasoning is the dual of precondition.
        //
        // P = pass, F = fail
        //
        // 1 [OK] FFFFFFFF
        // 2 [OK] FFFFPPPP
        // 3 [OK] PPPPPPPP
        // 4 [KO] PPPF****
        // 5 [KO] FFPPF***
        //
        //So **PF** means violation.
        //For sake of speed we check cases 1, 2, 5.
        //If the first postcondition passes we assume we are in case 3 (even if was 4).
        args = [].slice.apply(args); //shallow copy
        args.unshift(result);
        var i;
        var n = postconditions.length;
        var exception;
        var fp;
        //we check them from the leaf of the hierarchy to the root.
        for (i = 0; i &lt; n; ++i) {
            try {
                postconditions[i].apply(instance, args);
                if (i === 0) {
                    //The most current precodition passed. No further checks.
                    break;
                }
                <span class="missing-if-branch" title="else path not taken" >E</span>if (exception) {
                    //One of the previous precoditions failed but now we
                    //encountered one which doesn't fail.
                    fp = true;
                }
            } catch (e) {
                if (!exception) {
                    exception = e; //store the first
                }
                if (fp) {
                    //fpf case
                    break;
                }
            }
        }
        if (i === 0) {
            //case 3 or 4
            Mic.assert(!exception);
        } else if (i === n) {
            //case 1 (!fp) or 2 (fp)
            Mic.assert(exception);
            throw exception;
        } else {
            //case 5
            Mic.assert(fp);
            Mic.assert(exception);
            throw new Error(Mic._COUNTERVARIANCE_VIOLATION_MSG);
            //TODO: implement a custom exception with a cause and pass exception as cause
        }
    };
&nbsp;
    return Mic;
});</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Jul 21 2015 22:24:19 GMT+0200 (ora legale Europa occidentale)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
